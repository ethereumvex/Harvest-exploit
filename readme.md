# Harvest Finance 

## Summary

On October 26 an attacker executed [many transactions](https://etherscan.io/address/0xf224ab004461540778a914ea397c589b677e27bb) using a [contract](https://etherscan.io/address/0xc6028a9fa486f52efd2b95b949ac630d287ce0af) that would execute a pair of flash loans and manipulate the price oracle used for Harvest's pools, thereby creating an arbitrage opportunity on the price of the pool tokens. 

## Background

Harvest Finance provides farming strategies that move depositor's funds into different protocols, passing rewards from the protocols to the depositors along with their own Farm token. When a user deposits funds into a Harvest pool, they are given pool tokens to represent their share of the pool. 

## Details of the vulnerability

## Timeline of events

All of the following transactions were called by the exploiter on the malicious contract. Note that between the `0xfdb57542` and `0x60e11a36` entries there were many more calls to these methods as can be [seen here](https://oko.palkeo.com/0xc6028a9Fa486F52efd2B95B949AC630d287CE0aF/calls_to/). 

- [Oct-26-2020 02:53:31 AM +UTC](https://etherscan.io/tx/0x117f502fb08f575c8e1dc11d80094d177e2cdcf09b12a8bc121e49fd32f9c6d1) the malicious contract `[0xc6028a9fa486f52efd2b95b949ac630d287ce0af](https://etherscan.io/address/0xc6028a9fa486f52efd2b95b949ac630d287ce0af)` is published.
- [Oct-26-2020 02:53:49 AM +UTC](https://etherscan.io/tx/0x6fa5d1dbaa60a24b1593020c82f1fc414befb835f1755ba7830761d07de12f03), `init()` is called.
- [Oct-26-2020 02:53:58 AM +UTC](https://etherscan.io/tx/0x35f8d2f572fceaac9288e5d462117850ef2694786992a8c3f6d02612277b0877), `0xfdb57542` is called.
- [Oct-26-2020 03:01:39 AM +UTC](https://etherscan.io/tx/0x9d093325272701d63fdafb0af2d89c7e23eaf18be1a51c580d9bce89987a2dc1), `0x60e11a36` is called.
- [Oct-26-2020 03:01:48 AM +UTC](https://etherscan.io/tx/0x53fae6f1d6b8a76a666a0bf7f9c724e6006465e544f89f1515b939d8911e8c58), `skim()` is called, sending funds to `[0x3811765a53c3188c24d412daec3f60faad5f119b](https://etherscan.io/token/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48?a=0x3811765a53c3188c24d412daec3f60faad5f119b)`.
- [Oct-26-2020 03:01:53 AM +UTC](https://etherscan.io/tx/0x25119cd54a4562aa427d9770af383512f9cb5e8e4d17232ad96b69dc293a3510), `0x5ee216b5` is called, which returns some funds to the Harvest Deployer.